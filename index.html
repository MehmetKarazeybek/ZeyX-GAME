<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geometry Dash Klonu</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background: linear-gradient(135deg, #1a0033, #330066);
            color: #fff;
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            height: 100vh;
            position: relative;
        }
        canvas {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 3;
        }
        #home, #shop {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
            text-align: center;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #00ffcc;
            width: 90%;
            max-width: 400px;
        }
        #home::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                45deg,
                rgba(255, 255, 255, 0.05),
                rgba(255, 255, 255, 0.05) 10px,
                transparent 10px,
                transparent 20px
            );
            pointer-events: none;
        }
        #cubePreview {
            width: 60px;
            height: 60px;
            margin: 15px auto;
            animation: rotatePreview 8s linear infinite;
        }
        @keyframes rotatePreview {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        button {
            display: block;
            width: 100%;
            max-width: 200px;
            padding: 12px;
            margin: 10px auto;
            background: linear-gradient(180deg, #00ffcc, #00b3b3);
            color: #000;
            border: 2px solid #00ffcc;
            border-radius: 5px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5);
            transition: all 0.2s;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }
        button:hover {
            background: linear-gradient(180deg, #00e6b8, #009999);
            border-color: #00e6b8;
            transform: translateY(-2px);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.8);
        }
        #shopItems {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
            justify-items: center;
            padding: 10px;
        }
        .shop-item {
            text-align: center;
            background: #222;
            padding: 8px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            width: 100px;
        }
        .shop-item canvas {
            display: block;
            margin: 0 auto;
            border: 2px solid #555;
            border-radius: 3px;
            width: 40px;
            height: 40px;
        }
        .shop-item p {
            margin: 5px 0;
            color: #ddd;
            font-size: 12px;
        }
        .shop-item button {
            width: 80px;
            padding: 6px;
            font-size: 14px;
            margin: 5px auto;
        }
        h1 {
            font-size: 36px;
            color: #00ffcc;
            text-shadow: 0 0 10px #00ffcc, 0 0 20px #00ffcc;
            margin: 15px 0;
            animation: glow 2s infinite alternate;
        }
        @keyframes glow {
            from { text-shadow: 0 0 10px #00ffcc, 0 0 20px #00ffcc; }
            to { text-shadow: 0 0 20px #00ffcc, 0 0 30px #00ffcc; }
        }
        h2, h3, p {
            color: #ddd;
            margin: 8px 0;
            text-shadow: 1px 1px 1px #000;
            font-size: 16px;
        }
        #background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            background: linear-gradient(135deg, #1a0033, #330066);
        }
        #background::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                45deg,
                rgba(255, 255, 255, 0.05),
                rgba(255, 255, 255, 0.05) 10px,
                transparent 10px,
                transparent 20px
            );
            pointer-events: none;
        }
        #profileButton {
            position: fixed;
            bottom: 15px;
            right: 15px;
            width: 80px;
            padding: 8px;
            font-size: 14px;
            z-index: 2;
        }
        @media (max-width: 600px) {
            h1 { font-size: 28px; }
            h2, h3, p { font-size: 14px; }
            button { font-size: 16px; padding: 10px; }
            #cubePreview { width: 50px; height: 50px; }
            .shop-item { width: 90px; }
            .shop-item canvas { width: 35px; height: 35px; }
            .shop-item button { font-size: 12px; width: 70px; padding: 5px; }
            #home, #shop { padding: 15px; }
        }
    </style>
</head>
<body>
    <div id="background"></div>
    <div id="home">
        <h1>Geometry Dash Klonu</h1>
        <h2>Skor: <span id="scoreDisplay">0</span> | Seviye: <span id="levelDisplay">1</span></h2>
        <button onclick="startGame()">Oyna</button>
        <button onclick="showShop()">Dükkan</button>
        <h3>Seçili Küp</h3>
        <canvas id="cubePreview" width="60" height="60"></canvas>
    </div>
    <div id="shop" style="display: none;">
        <h2>Dükkan</h2>
        <p>Skor: <span id="shopScoreDisplay">0</span></p>
        <div id="shopItems"></div>
        <button onclick="showHome()">Anasayfaya Dön</button>
    </div>
    <button id="profileButton">Profil</button>
    <canvas id="gameCanvas"></canvas>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const previewCanvas = document.getElementById('cubePreview');
        const previewCtx = previewCanvas.getContext('2d');
        const background = document.getElementById('background');

        // Canvas'ı tam ekran yap
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        // Oyuncu
        let player = {
            x: 100,
            y: window.innerHeight - 100,
            width: window.innerWidth < 600 ? 25 : 30,
            height: window.innerWidth < 600 ? 25 : 30,
            velocityY: 0,
            gravity: 0.7,
            jumpPower: -14,
            isJumping: false,
            doubleJump: false,
            rotation: 0,
            skin: 0
        };

        // Engeller, toplayıcılar
        let obstacles = [];
        let collectibles = [];
        let obstacleFrequency = 80;
        let baseSpeed = 6;
        let frameCount = 0;
        let score = 0;
        let level = 1;
        let difficulty = 1;
        let scoreMultiplier = 1;
        let gameActive = false;

        // Hareketli arka plan için parçacıklar
        let particles = [];
        for (let i = 0; i < 50; i++) {
            particles.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                size: Math.random() * 20 + 10,
                speedX: (Math.random() - 0.5) * 2,
                speedY: (Math.random() - 0.5) * 2,
                color: `hsl(${Math.random() * 360}, 100%, 50%)`,
                shape: Math.random() < 0.5 ? 'square' : 'triangle'
            });
        }

        // Parlayan yıldızlar
        let stars = [];
        for (let i = 0; i < 30; i++) {
            stars.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                size: Math.random() * 5 + 2,
                opacity: Math.random(),
                opacitySpeed: (Math.random() * 0.02 + 0.01) * (Math.random() < 0.5 ? 1 : -1)
            });
        }

        // Parlayan çizgiler
        let lines = [];
        for (let i = 0; i < 5; i++) {
            lines.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                length: Math.random() * 100 + 50,
                angle: Math.random() * Math.PI * 2,
                speed: (Math.random() * 0.5 + 0.2) * (Math.random() < 0.5 ? 1 : -1),
                color: `hsl(${Math.random() * 360}, 100%, 70%)`,
                opacity: Math.random() * 0.5 + 0.3
            });
        }

        // Arka plan renk değişimi
        let hue = 0;

        // Arka plan görseli (senin belirteceğin görsel)
        const backgroundImage = {
            url: 'data:image/jpeg;base64,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', // Buraya kendi görsel URL'ni koy
            imgObj: null
        };
        if (backgroundImage.url) {
            backgroundImage.imgObj = new Image();
            backgroundImage.imgObj.src = backgroundImage.url;
        }

        // Küp görünümleri (senin belirteceğin görseller)
        const skins = [
            {
                name: 'Varsayılan',
                cost: 0,
                color: '#00ccff',
                image: 'data:image/jpeg;base64,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', // Senin belirteceğin görsel
                unlocked: true,
                imgObj: null
            },
            {
                name: 'Yıldız',
                cost: 100,
                color: '#ffd700',
                image: 'https://i.imgur.com/8zL5v3Q.png', // Senin belirteceğin görsel
                unlocked: false,
                imgObj: null
            },
            {
                name: 'Alev',
                cost: 200,
                color: '#ff4500',
                image: 'https://i.imgur.com/9vR2k5j.png', // Senin belirteceğin görsel
                unlocked: false,
                imgObj: null
            },
            {
                name: 'Buz',
                cost: 150,
                color: '#00b7eb',
                image: 'https://i.imgur.com/3wL5v2X.png', // Senin belirteceğin görsel
                unlocked: false,
                imgObj: null
            },
            {
                name: 'Limon',
                cost: 250,
                color: '#32cd32',
                image: 'https://i.imgur.com/7kR5v9P.png', // Senin belirteceğin görsel
                unlocked: false,
                imgObj: null
            },
            {
                name: 'Galaksi',
                cost: 300,
                color: '#8a2be2',
                image: 'https://i.imgur.com/4tL5v8Y.png', // Senin belirteceğin görsel
                unlocked: false,
                imgObj: null
            }
        ];

        // Görselleri yükle
        skins.forEach(skin => {
            if (skin.image) {
                skin.imgObj = new Image();
                skin.imgObj.src = skin.image;
                skin.imgObj.onerror = () => {
                    console.error(`Görsel yüklenemedi: ${skin.image}`);
                    skin.imgObj = null; // Görsel yüklenemezse null yap
                };
            }
        });

        // Oyun döngüsü
        function gameLoop() {
            if (!gameActive) return;
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        function update() {
            // Oyuncu
            player.velocityY += player.gravity;
            player.y += player.velocityY;
            player.rotation += 0.1;

            // Yer çarpma
            if (player.y + player.height > canvas.height - 20) {
                player.y = canvas.height - 20 - player.height;
                player.velocityY = 0;
                player.isJumping = false;
                player.doubleJump = false;
            }
            if (player.y < 20) {
                player.y = 20;
                player.velocityY = 0;
            }

            // Zorluk
            difficulty = 1 + score / 1000;
            let currentSpeed = baseSpeed * difficulty;
            let currentFrequency = Math.max(50, obstacleFrequency / difficulty);

            // Engeller
            frameCount++;
            if (frameCount % Math.floor(currentFrequency) === 0) {
                let type = Math.random();
                let obstacle;
                if (type < 0.4) {
                    obstacle = {
                        x: canvas.width,
                        y: canvas.height - 40 - 20,
                        width: 30,
                        height: 40,
                        type: 'spike',
                        passed: false
                    };
                } else if (type < 0.6) {
                    obstacle = {
                        x: canvas.width,
                        y: canvas.height - 60 - 20,
                        radius: 20,
                        type: 'saw',
                        rotation: 0,
                        passed: false
                    };
                } else if (type < 0.8) {
                    obstacle = {
                        x: canvas.width,
                        y: canvas.height - 80 - 20,
                        width: 60,
                        height: 20,
                        type: 'platform',
                        velocityY: 2 * difficulty,
                        passed: false
                    };
                } else {
                    obstacle = {
                        x: canvas.width,
                        y: canvas.height - 100,
                        width: 50,
                        height: 30,
                        type: 'spikeChain',
                        velocityY: 3 * difficulty,
                        passed: false
                    };
                }
                obstacles.push(obstacle);

                // Toplayıcılar
                if (Math.random() < 0.3) {
                    let colType = Math.random();
                    collectibles.push({
                        x: canvas.width + 50,
                        y: canvas.height - 100,
                        radius: 10,
                        type: colType < 0.5 ? 'multiplier' : 'doubleJump',
                        value: colType < 0.5 ? 2 : true
                    });
                }
            }

            // Engeller
            for (let i = obstacles.length - 1; i >= 0; i--) {
                let obs = obstacles[i];
                obs.x -= currentSpeed;

                if (obs.type === 'saw') {
                    obs.rotation += 0.2 * difficulty;
                }
                if (obs.type === 'platform') {
                    obs.y += obs.velocityY;
                    if (obs.y < canvas.height - 120 || obs.y > canvas.height - 60) {
                        obs.velocityY *= -1;
                    }
                }
                if (obs.type === 'spikeChain') {
                    obs.y += obs.velocityY;
                    if (obs.y < canvas.height - 150 || obs.y > canvas.height - 50) {
                        obs.velocityY *= -1;
                    }
                }

                // Çarpışma kontrolü
                let hit = false;
                if (obs.type === 'saw') {
                    let dx = player.x + player.width / 2 - (obs.x + obs.radius);
                    let dy = player.y + player.height / 2 - (obs.y + obs.radius);
                    if (Math.sqrt(dx * dx + dy * dy) < obs.radius + player.width / 2) {
                        hit = true;
                    }
                } else if (obs.type === 'spike' || obs.type === 'spikeChain') {
                    if (
                        player.x < obs.x + obs.width &&
                        player.x + player.width > obs.x &&
                        player.y < obs.y + obs.height &&
                        player.y + player.height > obs.y
                    ) {
                        hit = true;
                    }
                } else if (obs.type === 'platform') {
                    if (
                        player.x < obs.x + obs.width &&
                        player.x + player.width > obs.x &&
                        player.y < obs.y + obs.height &&
                        player.y + player.height > obs.y
                    ) {
                        if (player.velocityY > 0 && player.y + player.height - obs.y <= 5) {
                            player.y = obs.y - player.height;
                            player.velocityY = 0;
                            player.isJumping = false;
                            player.doubleJump = false;
                        } else {
                            hit = true;
                        }
                    }
                }

                if (hit) {
                    gameActive = false;
                    canvas.style.display = 'none';
                    background.style.display = 'block';
                    document.getElementById('home').style.display = 'block';
                    document.getElementById('scoreDisplay').textContent = score;
                    document.getElementById('shopScoreDisplay').textContent = score;
                    obstacles = [];
                    collectibles = [];
                    updateShop();
                    alert('Oyun Bitti! Skor: ' + score + ' | Seviye: ' + level);
                    return;
                }

                // Skor
                if (!obs.passed && player.x > obs.x + (obs.width || obs.radius * 2)) {
                    obs.passed = true;
                    score += Math.floor(10 * difficulty * scoreMultiplier);
                    document.getElementById('scoreDisplay').textContent = score;
                }

                // Ekran dışı
                if (obs.x + (obs.width || obs.radius * 2) < 0) {
                    obstacles.splice(i, 1);
                }
            }

            // Toplayıcılar
            for (let i = collectibles.length - 1; i >= 0; i--) {
                let col = collectibles[i];
                col.x -= currentSpeed;

                if (
                    player.x < col.x + col.radius * 2 &&
                    player.x + player.width > col.x &&
                    player.y < col.y + col.radius * 2 &&
                    player.y + player.height > col.y
                ) {
                    if (col.type === 'multiplier') {
                        scoreMultiplier = col.value;
                        setTimeout(() => { scoreMultiplier = 1; }, 5000);
                    } else if (col.type === 'doubleJump') {
                        player.doubleJump = true;
                        setTimeout(() => { player.doubleJump = false; }, 10000);
                    }
                    collectibles.splice(i, 1);
                }

                if (col.x + col.radius * 2 < 0) {
                    collectibles.splice(i, 1);
                }
            }

            // Hareketli arka plan parçacıkları
            particles.forEach(p => {
                p.x += p.speedX;
                p.y += p.speedY;
                if (p.x < 0 || p.x > canvas.width) p.speedX *= -1;
                if (p.y < 0 || p.y > canvas.height) p.speedY *= -1;
            });

            // Yıldızlar
            stars.forEach(s => {
                s.opacity += s.opacitySpeed;
                if (s.opacity > 1 || s.opacity < 0) s.opacitySpeed *= -1;
            });

            // Parlayan çizgiler
            lines.forEach(l => {
                l.x += Math.cos(l.angle) * l.speed;
                l.y += Math.sin(l.angle) * l.speed;
                if (l.x < -l.length || l.x > canvas.width + l.length || l.y < -l.length || l.y > canvas.height + l.length) {
                    l.x = Math.random() * canvas.width;
                    l.y = Math.random() * canvas.height;
                    l.angle = Math.random() * Math.PI * 2;
                    l.color = `hsl(${Math.random() * 360}, 100%, 70%)`;
                }
            });

            // Arka plan renk değişimi
            hue = (hue + 2) % 360;
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Arka plan görseli
            if (backgroundImage.imgObj && backgroundImage.imgObj.complete) {
                ctx.globalAlpha = 0.5;
                ctx.drawImage(backgroundImage.imgObj, 0, 0, canvas.width, canvas.height);
                ctx.globalAlpha = 1;
            } else {
                // Görsel yoksa gradyan
                let gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                gradient.addColorStop(0, `hsl(${hue}, 80%, 15%)`);
                gradient.addColorStop(1, `hsl(${(hue + 180) % 360}, 80%, 15%)`);
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            }

            // Grid efekti
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
            ctx.lineWidth = 1;
            for (let x = 0; x < canvas.width; x += 50) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            for (let y = 0; y < canvas.height; y += 50) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }

            // Parlayan çizgiler
            lines.forEach(l => {
                ctx.strokeStyle = l.color;
                ctx.globalAlpha = l.opacity;
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(l.x, l.y);
                ctx.lineTo(l.x + Math.cos(l.angle) * l.length, l.y + Math.sin(l.angle) * l.length);
                ctx.stroke();
            });
            ctx.globalAlpha = 1;

            // Parçacıklar
            particles.forEach(p => {
                ctx.fillStyle = p.color;
                if (p.shape === 'square') {
                    ctx.fillRect(p.x - p.size / 2, p.y - p.size / 2, p.size, p.size);
                } else {
                    ctx.beginPath();
                    ctx.moveTo(p.x, p.y - p.size / 2);
                    ctx.lineTo(p.x - p.size / 2, p.y + p.size / 2);
                    ctx.lineTo(p.x + p.size / 2, p.y + p.size / 2);
                    ctx.closePath();
                    ctx.fill();
                }
            });

            // Yıldızlar
            stars.forEach(s => {
                ctx.fillStyle = `rgba(255, 255, 255, ${s.opacity})`;
                ctx.beginPath();
                ctx.moveTo(s.x, s.y - s.size);
                ctx.lineTo(s.x + s.size * 0.3, s.y - s.size * 0.3);
                ctx.lineTo(s.x + s.size, s.y);
                ctx.lineTo(s.x + s.size * 0.3, s.y + s.size * 0.3);
                ctx.lineTo(s.x, s.y + s.size);
                ctx.lineTo(s.x - s.size * 0.3, s.y + s.size * 0.3);
                ctx.lineTo(s.x - s.size, s.y);
                ctx.lineTo(s.x - s.size * 0.3, s.y - s.size * 0.3);
                ctx.closePath();
                ctx.fill();
            });

            // Zemin/tavan
            ctx.fillStyle = '#333';
            ctx.fillRect(0, canvas.height - 20, canvas.width, 20);
            ctx.fillRect(0, 0, canvas.width, 20);
            ctx.strokeStyle = '#555';
            ctx.lineWidth = 2;
            ctx.strokeRect(0, canvas.height - 20, canvas.width, 20);
            ctx.strokeRect(0, 0, canvas.width, 20);

            // Oyuncu
            ctx.save();
            ctx.translate(player.x + player.width / 2, player.y + player.height / 2);
            ctx.rotate(player.rotation);
            if (skins[player.skin].imgObj && skins[player.skin].imgObj.complete) {
                ctx.drawImage(skins[player.skin].imgObj, -player.width / 2, -player.height / 2, player.width, player.height);
            } else {
                ctx.fillStyle = skins[player.skin].color;
                ctx.fillRect(-player.width / 2, -player.height / 2, player.width, player.height);
                ctx.strokeStyle = '#fff';
                ctx.strokeRect(-player.width / 2, -player.height / 2, player.width, player.height);
            }
            ctx.restore();

            // Engeller
            obstacles.forEach(obs => {
                if (obs.type === 'spike') {
                    ctx.fillStyle = '#ff4444';
                    ctx.beginPath();
                    ctx.moveTo(obs.x, obs.y + obs.height);
                    ctx.lineTo(obs.x + obs.width / 2, obs.y);
                    ctx.lineTo(obs.x + obs.width, obs.y + obs.height);
                    ctx.closePath();
                    ctx.fill();
                    ctx.strokeStyle = '#fff';
                    ctx.lineWidth = 1;
                    ctx.stroke();
                } else if (obs.type === 'saw') {
                    ctx.save();
                    ctx.translate(obs.x + obs.radius, obs.y + obs.radius);
                    ctx.rotate(obs.rotation);
                    ctx.fillStyle = '#aaa';
                    ctx.beginPath();
                    ctx.arc(0, 0, obs.radius, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.strokeStyle = '#fff';
                    ctx.lineWidth = 1;
                    ctx.stroke();
                    for (let i = 0; i < 8; i++) {
                        ctx.beginPath();
                        ctx.moveTo(0, obs.radius * 0.8);
                        ctx.lineTo(obs.radius * 0.2, obs.radius * 1.3);
                        ctx.lineTo(-obs.radius * 0.2, obs.radius * 1.3);
                        ctx.closePath();
                        ctx.fillStyle = '#ff6666';
                        ctx.fill();
                        ctx.rotate(Math.PI / 4);
                    }
                    ctx.restore();
                } else if (obs.type === 'platform') {
                    ctx.fillStyle = '#00ccff';
                    ctx.fillRect(obs.x, obs.y, obs.width, obs.height);
                    ctx.strokeStyle = '#fff';
                    ctx.lineWidth = 1;
                    ctx.strokeRect(obs.x, obs.y, obs.width, obs.height);
                } else if (obs.type === 'spikeChain') {
                    ctx.fillStyle = '#ff4444';
                    for (let i = 0; i < 3; i++) {
                        ctx.beginPath();
                        ctx.moveTo(obs.x + i * 15, obs.y + obs.height);
                        ctx.lineTo(obs.x + i * 15 + 7.5, obs.y);
                        ctx.lineTo(obs.x + i * 15 + 15, obs.y + obs.height);
                        ctx.closePath();
                        ctx.fill();
                        ctx.strokeStyle = '#fff';
                        ctx.stroke();
                    }
                }
            });

            // Toplayıcılar
            collectibles.forEach(col => {
                ctx.fillStyle = col.type === 'multiplier' ? '#ffd700' : '#800080';
                ctx.beginPath();
                ctx.arc(col.x + col.radius, col.y + col.radius, col.radius, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = '#fff';
                ctx.font = '12px Arial';
                ctx.fillText(col.type === 'multiplier' ? '2x' : '2J', col.x + col.radius - 8, col.y + col.radius + 4);
            });

            // Skor ve seviye
            ctx.fillStyle = '#fff';
            ctx.font = '24px Arial';
            ctx.fillText('Skor: ' + score, 10, 30);
            ctx.fillText('Seviye: ' + level, 10, 60);
            if (scoreMultiplier > 1) {
                ctx.fillText('Çarpan: ' + scoreMultiplier + 'x', 10, 90);
            }
            if (player.doubleJump) {
                ctx.fillText('Çift Zıplama!', 10, 120);
            }
        }

        // Kontroller
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' && gameActive) {
                if (!player.isJumping) {
                    player.velocityY = player.jumpPower;
                    player.isJumping = true;
                } else if (player.doubleJump) {
                    player.velocityY = player.jumpPower;
                    player.doubleJump = false;
                }
            }
        });

        // Mobil dokunmatik kontrol
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            if (gameActive) {
                if (!player.isJumping) {
                    player.velocityY = player.jumpPower;
                    player.isJumping = true;
                } else if (player.doubleJump) {
                    player.velocityY = player.jumpPower;
                    player.doubleJump = false;
                }
            }
        });

        // Dükkan
        function updateShop() {
            const shopItems = document.getElementById('shopItems');
            shopItems.innerHTML = ''; // Önceki içeriği temizle
            skins.forEach((skin, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'shop-item';

                // Küp görseli için canvas
                const itemCanvas = document.createElement('canvas');
                itemCanvas.width = window.innerWidth < 600 ? 35 : 40;
                itemCanvas.height = window.innerWidth < 600 ? 35 : 40;
                const itemCtx = itemCanvas.getContext('2d');

                // Görseli çiz
                if (skin.imgObj && skin.imgObj.complete) {
                    itemCtx.drawImage(skin.imgObj, 0, 0, itemCanvas.width, itemCanvas.height);
                } else {
                    // Görsel yüklenmediyse veya hata varsa renk kullan
                    itemCtx.fillStyle = skin.color;
                    itemCtx.fillRect(0, 0, itemCanvas.width, itemCanvas.height);
                    itemCtx.strokeStyle = '#fff';
                    itemCtx.strokeRect(0, 0, itemCanvas.width, itemCanvas.height);
                    itemCtx.fillStyle = '#fff';
                    itemCtx.font = '10px Arial';
                    itemCtx.fillText('Yükleniyor...', 2, 20);
                }

                // Küp adı ve fiyatı
                const itemText = document.createElement('p');
                itemText.textContent = `${skin.name} (${skin.cost} Skor)`;

                // Seç/Satın Al tuşu
                const itemButton = document.createElement('button');
                itemButton.textContent = skin.unlocked ? 'Seç' : `Satın Al (${skin.cost})`;
                itemButton.addEventListener('click', () => {
                    if (skin.unlocked) {
                        player.skin = index;
                        updatePreview();
                        alert(`${skin.name} seçildi!`);
                    } else if (score >= skin.cost) {
                        score -= skin.cost;
                        skin.unlocked = true;
                        player.skin = index;
                        document.getElementById('scoreDisplay').textContent = score;
                        document.getElementById('shopScoreDisplay').textContent = score;
                        updateShop();
                        updatePreview();
                        alert(`${skin.name} satın alındı! Kalan Skor: ${score}`);
                    } else {
                        alert(`Yeterli skorun yok! Gerekli: ${skin.cost}, Mevcut: ${score}`);
                    }
                });

                itemDiv.appendChild(itemCanvas);
                itemDiv.appendChild(itemText);
                itemDiv.appendChild(itemButton);
                shopItems.appendChild(itemDiv);
            });
        }

        // Önizleme
        function updatePreview() {
            previewCtx.clearRect(0, 0, previewCanvas.width, previewCanvas.height);
            if (skins[player.skin].imgObj && skins[player.skin].imgObj.complete) {
                previewCtx.drawImage(skins[player.skin].imgObj, 0, 0, previewCanvas.width, previewCanvas.height);
            } else {
                previewCtx.fillStyle = skins[player.skin].color;
                previewCtx.fillRect(0, 0, previewCanvas.width, previewCanvas.height);
                previewCtx.strokeStyle = '#fff';
                previewCtx.strokeRect(0, 0, previewCanvas.width, previewCanvas.height);
            }
        }

        // Sayfalar
        function showShop() {
            background.style.display = 'none';
            document.getElementById('home').style.display = 'none';
            document.getElementById('shop').style.display = 'block';
            document.getElementById('shopScoreDisplay').textContent = score;
            updateShop();
        }

        function showHome() {
            background.style.display = 'block';
            document.getElementById('shop').style.display = 'none';
            document.getElementById('home').style.display = 'block';
            document.getElementById('scoreDisplay').textContent = score;
            document.getElementById('levelDisplay').textContent = level;
        }

        // Oyun başlat
        function startGame() {
            gameActive = true;
            canvas.style.display = 'block';
            background.style.display = 'none';
            document.getElementById('home').style.display = 'none';
            player.y = window.innerHeight - 100;
            player.velocityY = 0;
            player.doubleJump = false;
            obstacles = [];
            collectibles = [];
            frameCount = 0;
            difficulty = 1;
            scoreMultiplier = 1;
            gameLoop();
        }

        // İlk yükleme
        updatePreview();
        document.getElementById('scoreDisplay').textContent = score;
        document.getElementById('levelDisplay').textContent = level;
        updateShop(); // Dükkanı ilk yüklemede güncelle

        // Profil butonu (şimdilik işlevsiz)
        document.getElementById('profileButton').onclick = () => {
            alert('Profil bölümü henüz işlevsel değil!');
        };
    </script>
</body>
</html>
